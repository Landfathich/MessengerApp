<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}MessengerApp{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'chat/css/base.css' %}">
    {% block extra_css %}{% endblock %}
</head>
<body>
<!-- –•–µ–¥–µ—Ä -->
<div class="header">
    <a href="{% url 'chat_dashboard' %}"
       style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px;">
        <span>üè†</span>
        <h1 style="margin: 0;">MessengerApp</h1>
    </a>
    <div class="user-info">
        <span>–ü—Ä–∏–≤–µ—Ç, {{ user.username }}!</span>
        <a href="{% url 'logout' %}" class="logout-btn">–í—ã–π—Ç–∏</a>
    </div>
</div>
<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
<div class="container">
    <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –¥—Ä—É–∑—å—è–º–∏ -->
    <div class="sidebar">
        <h3>–î—Ä—É–∑—å—è</h3>
        <div class="add-friend-form">
            <form method="post" action="{% url 'add_friend' %}">
                {% csrf_token %}
                <input type="text" name="friend_code" placeholder="–ö–æ–¥ –¥—Ä—É–≥–∞" required>
                <button type="submit" class="chat-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
            </form>
        </div>

        <div id="friends-list">
            {% for friend_data in friends %}
                <a href="{% url 'start_chat' friend_data.user.id %}" style="text-decoration: none; color: inherit;">
                    <div class="friend-item" data-user-id="{{ friend_data.user.id }}">
                        <span>{{ friend_data.user.username }}</span>
                        <div class="online-indicator"></div>
                    </div>
                </a>
            {% empty %}
                <p style="color: #666; text-align: center; margin-top: 20px;">–ü–æ–∫–∞ –Ω–µ—Ç –¥—Ä—É–∑–µ–π</p>
            {% endfor %}
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="content">
        {% block content %}
            <!-- –°—é–¥–∞ –±—É–¥–µ—Ç –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å—Å—è –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü -->
        {% endblock %}
    </div>
</div>

{% block scripts %}
    <!-- –°—é–¥–∞ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è JS —Å–∫—Ä–∏–ø—Ç—ã -->
{% endblock %}
</body>
</html>